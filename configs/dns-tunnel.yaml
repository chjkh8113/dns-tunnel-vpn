# dns-tunnel unified configuration

tunnel:
  dnstt_path: "./dnstt-client.exe"  # Relative to executable directory
  domain: "t.rmdashrf.com"
  pubkey: "7eb6bd9d446c54ee03640f21c827bbca41e93aaabd09c74d28c8990d4472bf4c"
  local_addr: "127.0.0.1:7000"
  resolver_type: "udp"
  utls_fingerprint: "4*random,3*Firefox_120,1*Firefox_105,3*Chrome_120"
  idle_timeout: "2m"

scanner:
  enabled: true
  concurrent_scans: 100
  timeout: "2s"
  min_resolvers: 10
  resolver_sources:
    - "builtin"  # Use built-in public DNS resolvers
  background_interval: "5m"    # Scan every 5 minutes in background
  country_code: ""             # ISO country code for IP ranges (e.g., "ir" for Iran)
  max_candidates: 1000         # Max IPs to scan from country ranges

health:
  check_interval: "10s"     # Check every 10 seconds (proxy handshake only)
  fail_threshold: 3         # 3 failures = unhealthy (30s of actual failure)
  recovery_threshold: 1     # 1 success = healthy again
  timeout: "5s"             # 5s timeout per health check

cloudflare:
  enabled: false
  api_token: ""
  zone_id: ""
  txt_record: "dns.rmdashrf.com"

api:
  enabled: false            # Enable REST API server
  port: 8080                # API server port

log:
  level: "info"
  format: "text"
